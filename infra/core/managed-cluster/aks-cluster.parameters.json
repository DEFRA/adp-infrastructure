{
  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentParameters.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "vnet": {
      "value": {
        "name": "#{{ virtualNetworkName }}",
        "resourceGroup": "#{{ virtualNetworkResourceGroup }}",
        "subnetClusterNodes": "#{{ networkResourceNamePrefix }}#{{ nc_resource_subnet }}#{{ nc_instance_regionid }}01"
      }
    },
    "cluster": {
      "value": {
        "name": "#{{ infraResourceNamePrefix }}#{{ nc_resource_kubernetesservice }}#{{ nc_instance_regionid }}01",
        "kubernetesVersion": "#{{ aksVersion }}",
        "skuTier": "#{{ aksClusterSkuTier }}",
        "nodeResourceGroup": "#{{ aksResourceGroup }}-Managed",
        "miControlPlane": "#{{ aksControlPlaneManagedIdentity }}",
        "adminAadGroupObjectId": "#{{ aksAADProfileAdminGroupObjectId }}",
        "podCidr": "#{{ aksClusterPodCidr }}",
        "serviceCidr": "#{{ aksClusterServiceCidr }}",
        "dnsServiceIp": "#{{ aksClusterDnsServiceIp }}",
        "npSystem": {
          "count": 2,
          "osDiskSizeGB": 80,
          "maxCount": 4,
          "minCount": 1,
          "maxPods": 80,
          "availabilityZones": [
            "1",
            "2",
            "3"
          ]
        },
        "npUser": {
          "count": 2,
          "osDiskSizeGB": 128,
          "maxCount": 10,
          "minCount": 2,
          "maxPods": 80,
          "minPods": 2,
          "availabilityZones": [
            "1",
            "2",
            "3"
          ]
        }
      }
    },
    "privateDnsZone": {
      "value": {
        "prefix": "#{{ dnsResourceNamePrefix }}#{{ nc_resource_dnszone }}#{{ nc_instance_regionid }}01",
        "resourceGroup": "#{{ dnsResourceGroup }}"
      }
    },
    "containerRegistry": {
      "value": {
        "name": "#{{ ssvSharedAcrName }}",
        "resourceGroup": "#{{ ssvSharedResourceGroup }}",
        "subscriptionId": "#{{ ssv3subscriptionId }}"
      }
    },
    "location": {
      "value": "#{{ location }}"
    },
    "environment": {
      "value": "#{{ environment }}"
    },
    "monitoringWorkspace": {
      "value": {
        "name": "#{{ logAnalyticsWorkspace }}",
        "resourceGroup": "#{{ servicesResourceGroup }}"
      }
    },
    "fluxConfig": {
      "value": {
        "clusterCore": {
          "gitRepository": {
            "syncIntervalInSeconds": 300,
            "timeoutInSeconds": 180,
            "url": "https://github.com/DEFRA/adp-flux-core",
            "branch": "main"
          },
          "kustomizations": {
            "timeoutInSeconds": 600,
            "syncIntervalInSeconds": 600,
            "clusterPath": "./clusters/#{{ lower(environment) }}/01",
            "infraPath": "./infra/#{{ lower(environment) }}/01",
            "servicesPath": "./services/#{{ lower(environment) }}/01"
          }
        }
      }
    },
    "asoPlatformManagedIdentity": {
      "value": "#{{ infraResourceNamePrefix }}#{{ nc_resource_managedidentity }}#{{ nc_instance_regionid }}01-adp-aso-platform"
    }
  }
}